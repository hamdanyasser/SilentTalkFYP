# ============================================
# Coturn TURN/STUN Server Configuration
# SilentTalk WebRTC Infrastructure
# ============================================

# Listening port for STUN/TURN
listening-port=3478

# TLS listening port (for secure connections)
tls-listening-port=5349

# Relay ports range for UDP
min-port=49152
max-port=65535

# Verbose logging (disable in production)
verbose

# Realm for authentication
realm=silentstalk.local

# Server name
server-name=silentstalk-turn

# Use fingerprints in TURN messages
fingerprint

# Use long-term credentials mechanism
lt-cred-mech

# Static user credentials (development only)
user=silentstalk:silentstalk_turn_password

# Disable multicast peers
no-multicast-peers

# Disable loopback peers
no-loopback-peers

# Enable mobility
mobility

# Deny access to private IP ranges
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255

# Allow loopback for development
# Remove this in production
no-loopback-peers

# Log file location
log-file=/var/log/turnserver.log

# Disable CLI
no-cli

# Process limits
max-bps=1000000

# Enable Prometheus monitoring (optional)
# prometheus

# WebRTC-friendly settings
no-dtls
no-tls

# Allow TURN over TCP
# Useful for networks that block UDP
no-tcp-relay

# Certificate paths (for TLS/DTLS)
# cert=/etc/coturn/cert.pem
# pkey=/etc/coturn/key.pem

# Database for persistent storage (optional)
# psql-userdb="host=postgres dbname=coturn user=coturn password=coturn_password"

# Alternate server (for redundancy)
# alternate-server=turn2.silentstalk.local:3478

# Disable STUN if only TURN is needed
# no-stun
